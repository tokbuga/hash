<html>
    <head>

    </head>
    <body>
        "nefetari ğŸ’ Ã¶zgÃ¼r"
        <script>
            console.log("nefetari ğŸ’ Ã¶zgÃ¼r")

            const checksumLengths = {
                "bakara": 3,    // Elif-Lam-Mim
                "Ã‚l-i Ä°mrÃ¢n": 3, // Elif-Lam-Mim
                "Aâ€™rÃ¢f": 4,     // Elif-Lam-Mim-Sad
                "YÃ»nus": 3,     // Elif-Lam-Ra
                "HÃ»d": 3,       // Elif-Lam-Ra
                "YÃ»suf": 3,     // Elif-Lam-Ra
                "Raâ€™d": 4,      // Elif-Lam-Mim-Ra
                "Ä°brÃ¢him": 3,   // Elif-Lam-Ra
                "Hicr": 3,      // Elif-Lam-Ra
                "Meryem": 5,    // Kaf-Ha-Ya-Ayn-Sad
                "TÃ¢-HÃ¢": 2,     // Ta-Ha
                "ÅuarÃ¢": 3,     // Ta-Sin-Mim
                "Neml": 2,      // Ta-Sin
                "Kasas": 3,     // Ta-Sin-Mim
                "AnkebÃ»t": 3,   // Elif-Lam-Mim
                "RÃ»m": 3,       // Elif-Lam-Mim
                "Lokman": 3,     // Elif-Lam-Mim
                "Secde": 3,     // Elif-Lam-Mim
                "YÃ¢-SÃ®n": 2,    // Ya-Sin
                "SÃ¢d": 1,       // Sad
                "Fussilet": 3,  // Ha-Mim
                "sura": 5,      // Kaf-Ha-Ya-Ayn-Sad
                "Zuhruf": 2,    // Ha-Mim
                "DuhÃ¢n": 2,     // Ha-Mim
                "CÃ¢siye": 2,    // Ha-Mim
                "AhkÃ¢f": 2,     // Ha-Mim
                "Kaf": 1,       // Kaf
                "Kalem": 2,     // Nun
                "Muzzemmil": 2  // Kaf-Lam
            };

            // Ebced deÄŸerleri iÃ§in bir harita
            const ebcedMap = {
                'Ø§': 1, 'Ø¨': 2, 'Ø¬': 3, 'Ø¯': 4, 'Ù‡': 5, 'Ùˆ': 6, 'Ø²': 7, 'Ø­': 8, 'Ø·': 9,
                'ÙŠ': 10, 'Ùƒ': 20, 'Ù„': 30, 'Ù…': 40, 'Ù†': 50, 'Ø³': 60, 'Ø¹': 70, 'Ù': 80, 'Øµ': 90,
                'Ù‚': 100, 'Ø±': 200, 'Ø´': 300, 'Øª': 400, 'Ø«': 500, 'Ø®': 600, 'Ø°': 700, 'Ø¶': 800,
                'Ø¸': 900, 'Øº': 1000
            };

            // Metni (harf veya kelime) Ebced deÄŸerine dÃ¶nÃ¼ÅŸtÃ¼ren fonksiyon
            function calculateEbcedValue(text) {
                let total = 0;
                
                // Metni harf harf dÃ¶ngÃ¼yle iÅŸle
                for (let i = 0; i < text.length; i++) {
                    const char = text[i];
                    // Harf Ebced haritasÄ±na varsa deÄŸerini al, yoksa 0
                    const value = ebcedMap[char] || 0;
                    total += value;
                }
                
                return total;
            }

            // ArapÃ§a metni temizleyen fonksiyon
            function cleanArabicText(text) {
                // Harekeleri ve sembolleri tanÄ±mlayan bir regex
                // \u064B-\u065F: Harekeler (fetha, damme, kesra, vb.)
                // \u06DD: Û (rubu' iÅŸareti)
                // \u06DE-\u06FF: DiÄŸer gereksiz semboller
                const unwantedChars = /[\u064B-\u065F\u06DD\u06DE-\u06FF]/g;
                
                // Harekeleri ve sembolleri kaldÄ±r
                let cleanedText = text.replace(unwantedChars, '');
                
                // Gereksiz boÅŸluklarÄ± temizle, ama kelimeler arasÄ±ndaki boÅŸluklarÄ± koru
                cleanedText = cleanedText.replace(/\s+/g, ' ').trim();
                
                return cleanedText;
            }

            // Metni iki parÃ§aya ayÄ±ran fonksiyon
            function splitTextForHash(cleanedText, suraName) {
                // Checksum harf sayÄ±sÄ±nÄ± al
                const checksumLength = checksumLengths[suraName] || 0;
                
                // Metni harf bazÄ±nda ayÄ±rmak iÃ§in boÅŸluklarÄ± dikkate almadan harfleri sayalÄ±m
                let charCount = 0;
                let checksumPart = '';
                let hashPart = '';
                let isChecksumPart = true;

                for (let i = 0; i < cleanedText.length; i++) {
                    const char = cleanedText[i];
                    if (char === ' ') {
                        // BoÅŸluklarÄ± her iki parÃ§ada da koru
                        if (isChecksumPart) {
                            checksumPart += char;
                        } else {
                            hashPart += char;
                        }
                        continue;
                    }

                    // Harf sayÄ±sÄ±nÄ± artÄ±r
                    charCount++;
                    
                    // Checksum kÄ±smÄ± dolduysa, kalan metni hash kÄ±smÄ±na ekle
                    if (charCount > checksumLength) {
                        isChecksumPart = false;
                    }

                    // Harfi uygun kÄ±sma ekle
                    if (isChecksumPart) {
                        checksumPart += char;
                    } else {
                        hashPart += char;
                    }
                }

                return {
                    checksumPart: checksumPart.trim(),
                    hashPart: hashPart.trim()
                };
            }


            fetch("sura.txt").then(r => r.text()).then(rawText => {
                
                console.group("ÅŸura")
                console.log({rawText})
                const cleanedText = cleanArabicText(rawText);
                console.log("TemizlenmiÅŸ Metin:", {cleanedText});

                const { checksumPart, hashPart } = splitTextForHash(cleanedText, "sura");

                console.log("Checksum KÄ±smÄ±:", checksumPart);
                console.log("Hash KÄ±smÄ±:", {hashPart});
                console.warn("Checksum KÄ±smÄ± Ebced DeÄŸeri:", calculateEbcedValue(checksumPart)); // "Ø­Ù… Ø¹Ø³Ù‚" (5 harf: Kaf-Ha-Ya-Ayn-Sad)
                console.warn("Hash KÄ±smÄ± Ebced DeÄŸeri:", calculateEbcedValue(hashPart));
                console.groupEnd("ÅŸura")

            })

            fetch("bakara.txt").then(r => r.text()).then(rawText => {

                console.group("bakara")
                console.log({rawText})                
                const cleanedText = cleanArabicText(rawText);
                console.log("TemizlenmiÅŸ Metin:", {cleanedText});

                const { checksumPart, hashPart } = splitTextForHash(cleanedText, "bakara");

                console.log("Checksum KÄ±smÄ±:", checksumPart);
                console.log("Hash KÄ±smÄ±:", {hashPart});
                console.warn("Checksum KÄ±smÄ± Ebced DeÄŸeri:", calculateEbcedValue(checksumPart)); // "Ø­Ù… Ø¹Ø³Ù‚" (5 harf: Kaf-Ha-Ya-Ayn-Sad)
                console.warn("Hash KÄ±smÄ± Ebced DeÄŸeri:", calculateEbcedValue(hashPart));
                console.groupEnd("bakara")
            })
        </script>
    </body>
</html>
