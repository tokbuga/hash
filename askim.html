<html>
    <head>

    </head>
    <body>
        "nefetari 💞 özgür"
        <script>
            console.log("nefetari 💞 özgür")

            const checksumLengths = {
                "bakara": 3,    // Elif-Lam-Mim
                "Âl-i İmrân": 3, // Elif-Lam-Mim
                "A’râf": 4,     // Elif-Lam-Mim-Sad
                "Yûnus": 3,     // Elif-Lam-Ra
                "Hûd": 3,       // Elif-Lam-Ra
                "Yûsuf": 3,     // Elif-Lam-Ra
                "Ra’d": 4,      // Elif-Lam-Mim-Ra
                "İbrâhim": 3,   // Elif-Lam-Ra
                "Hicr": 3,      // Elif-Lam-Ra
                "Meryem": 5,    // Kaf-Ha-Ya-Ayn-Sad
                "Tâ-Hâ": 2,     // Ta-Ha
                "Şuarâ": 3,     // Ta-Sin-Mim
                "Neml": 2,      // Ta-Sin
                "Kasas": 3,     // Ta-Sin-Mim
                "Ankebût": 3,   // Elif-Lam-Mim
                "Rûm": 3,       // Elif-Lam-Mim
                "Lokman": 3,     // Elif-Lam-Mim
                "Secde": 3,     // Elif-Lam-Mim
                "Yâ-Sîn": 2,    // Ya-Sin
                "Sâd": 1,       // Sad
                "Fussilet": 3,  // Ha-Mim
                "sura": 5,      // Kaf-Ha-Ya-Ayn-Sad
                "Zuhruf": 2,    // Ha-Mim
                "Duhân": 2,     // Ha-Mim
                "Câsiye": 2,    // Ha-Mim
                "Ahkâf": 2,     // Ha-Mim
                "Kaf": 1,       // Kaf
                "Kalem": 2,     // Nun
                "Muzzemmil": 2  // Kaf-Lam
            };

            // Ebced değerleri için bir harita
            const ebcedMap = {
                'ا': 1, 'ب': 2, 'ج': 3, 'د': 4, 'ه': 5, 'و': 6, 'ز': 7, 'ح': 8, 'ط': 9,
                'ي': 10, 'ك': 20, 'ل': 30, 'م': 40, 'ن': 50, 'س': 60, 'ع': 70, 'ف': 80, 'ص': 90,
                'ق': 100, 'ر': 200, 'ش': 300, 'ت': 400, 'ث': 500, 'خ': 600, 'ذ': 700, 'ض': 800,
                'ظ': 900, 'غ': 1000
            };

            // Metni (harf veya kelime) Ebced değerine dönüştüren fonksiyon
            function calculateEbcedValue(text) {
                let total = 0;
                
                // Metni harf harf döngüyle işle
                for (let i = 0; i < text.length; i++) {
                    const char = text[i];
                    // Harf Ebced haritasına varsa değerini al, yoksa 0
                    const value = ebcedMap[char] || 0;
                    total += value;
                }
                
                return total;
            }

            // Arapça metni temizleyen fonksiyon
            function cleanArabicText(text) {
                // Harekeleri ve sembolleri tanımlayan bir regex
                // \u064B-\u065F: Harekeler (fetha, damme, kesra, vb.)
                // \u06DD: ۞ (rubu' işareti)
                // \u06DE-\u06FF: Diğer gereksiz semboller
                const unwantedChars = /[\u064B-\u065F\u06DD\u06DE-\u06FF]/g;
                
                // Harekeleri ve sembolleri kaldır
                let cleanedText = text.replace(unwantedChars, '');
                
                // Gereksiz boşlukları temizle, ama kelimeler arasındaki boşlukları koru
                cleanedText = cleanedText.replace(/\s+/g, ' ').trim();
                
                return cleanedText;
            }

            // Metni iki parçaya ayıran fonksiyon
            function splitTextForHash(cleanedText, suraName) {
                // Checksum harf sayısını al
                const checksumLength = checksumLengths[suraName] || 0;
                
                // Metni harf bazında ayırmak için boşlukları dikkate almadan harfleri sayalım
                let charCount = 0;
                let checksumPart = '';
                let hashPart = '';
                let isChecksumPart = true;

                for (let i = 0; i < cleanedText.length; i++) {
                    const char = cleanedText[i];
                    if (char === ' ') {
                        // Boşlukları her iki parçada da koru
                        if (isChecksumPart) {
                            checksumPart += char;
                        } else {
                            hashPart += char;
                        }
                        continue;
                    }

                    // Harf sayısını artır
                    charCount++;
                    
                    // Checksum kısmı dolduysa, kalan metni hash kısmına ekle
                    if (charCount > checksumLength) {
                        isChecksumPart = false;
                    }

                    // Harfi uygun kısma ekle
                    if (isChecksumPart) {
                        checksumPart += char;
                    } else {
                        hashPart += char;
                    }
                }

                return {
                    checksumPart: checksumPart.trim(),
                    hashPart: hashPart.trim()
                };
            }


            fetch("sura.txt").then(r => r.text()).then(rawText => {
                
                console.group("şura")
                console.log({rawText})
                const cleanedText = cleanArabicText(rawText);
                console.log("Temizlenmiş Metin:", {cleanedText});

                const { checksumPart, hashPart } = splitTextForHash(cleanedText, "sura");

                console.log("Checksum Kısmı:", checksumPart);
                console.log("Hash Kısmı:", {hashPart});
                console.warn("Checksum Kısmı Ebced Değeri:", calculateEbcedValue(checksumPart)); // "حم عسق" (5 harf: Kaf-Ha-Ya-Ayn-Sad)
                console.warn("Hash Kısmı Ebced Değeri:", calculateEbcedValue(hashPart));
                console.groupEnd("şura")

            })

            fetch("bakara.txt").then(r => r.text()).then(rawText => {

                console.group("bakara")
                console.log({rawText})                
                const cleanedText = cleanArabicText(rawText);
                console.log("Temizlenmiş Metin:", {cleanedText});

                const { checksumPart, hashPart } = splitTextForHash(cleanedText, "bakara");

                console.log("Checksum Kısmı:", checksumPart);
                console.log("Hash Kısmı:", {hashPart});
                console.warn("Checksum Kısmı Ebced Değeri:", calculateEbcedValue(checksumPart)); // "حم عسق" (5 harf: Kaf-Ha-Ya-Ayn-Sad)
                console.warn("Hash Kısmı Ebced Değeri:", calculateEbcedValue(hashPart));
                console.groupEnd("bakara")
            })
        </script>
    </body>
</html>
